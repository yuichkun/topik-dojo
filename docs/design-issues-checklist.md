# 設計上の矛盾点・課題チェックリスト

## 概要
画面設計・仕様書作成過程で発見された矛盾点や未解決の課題を管理するためのチェックリスト。復習画面設計により主要課題は解決済み。

---

## 🚨 重要度：高（必須解決）

### ✅ 1. 復習画面の仕様不一致
- **問題**: 
  - `01-top.md`で復習ボタンの遷移先が`08-review.md`
  - 実際の画面一覧では`11-review.md`
  - 復習画面の仕様書が未作成
- **影響**: 復習機能の実装ができない
- **解決策**: 正しいファイル名に統一 + 復習画面仕様書作成
- **ステータス**: ✅ **解決済み** - `11-review.md`作成完了（参照修正は残課題）

### ✅ 2. 学習進捗データの更新仕様が不明
- **問題**: 
  - 積み重ね式グラフ用データ構造は定義済み
  - 実際の更新タイミング・方法が未定義
  - 復習画面仕様なしでは実装不可能
- **影響**: 積み重ね式グラフ機能が実現できない
- **解決策**: 復習画面で詳細な更新仕様を定義
- **ステータス**: ✅ **解決済み** - 復習セッション終了時の更新仕様を詳細定義

### ✅ 3. 単語-級の関連データ構造不足
- **問題**: 
  - 積み重ね式グラフには「その級の語彙のうち何％覚えたか」が必要
  - 現在のデータ構造では単語がどの級に属するか不明
  - 級別の習得率計算が不可能
- **影響**: 積み重ね式グラフの基本機能が実現できない
- **解決策**: 単語データに級情報を追加、またはマスターデータ設計
- **ステータス**: ✅ **解決済み** - 単語データに`grade`フィールド追加、進捗率計算仕様完成

---

## ⚠️ 重要度：中（要調整）

### ✅ 4. SRSシステムの仕様が曖昧
- **問題**: 
  - `requirements.md`：「簡易SRS」「基本的な間隔制御」のみ
  - `screen-flows.md`：「SRS優先度計算」「次回復習日計算」が登場
  - 具体的なアルゴリズム・間隔定義が不明
- **影響**: 復習機能の実装方針が決められない
- **解決策**: SRSアルゴリズムの詳細仕様を定義
- **ステータス**: ✅ **解決済み** - 間隔制御（1日→3日→1週間→2週間→1ヶ月）とアルゴリズム詳細化

### ❌ 5. データ構造の重複・競合
- **問題**: 以下が各画面で別々に定義されている
  - 学習完了状況（学習画面）
  - 復習マーク（学習画面）
  - テスト結果（テスト画面）
  - 単語習得状態（成績画面）
- **影響**: データの整合性確保が困難
- **解決策**: 統合されたデータ設計ドキュメント作成
- **ステータス**: ❌ 未解決

### ✅ 6. 音声再生ポリシーの不統一
- **問題**: 
  - 学習画面：手動のみ
  - リスニングテスト：自動再生+手動
  - リーディングテスト：手動のみ  
  - 復習画面：自動再生（screen-flows.mdより）
- **影響**: ユーザー体験の一貫性欠如
- **解決策**: 音声再生ポリシーの統一ルール策定
- **ステータス**: ✅ **解決済み** - 画面目的に応じた論理的な音声ポリシーを確認済み

---

## 📋 重要度：低（改善推奨）

### ✅ 7. ファイル参照の不整合
- **問題**: 
  - `02-learning-mode-selection.md`の成績ボタン遷移先が`07-grade-view.md`
  - 実際のファイルは`10-results.md`
  - `01-top.md`の復習ボタン遷移先が`08-review.md`
  - `03-unit-selection.md`の学習画面遷移先が`05-learning.md`
  - `05-listening-unit-selection.md`のテスト画面遷移先が`07-listening-test.md`
- **影響**: 実装時のリンク切れ
- **解決策**: 正しいファイル名に修正
- **ステータス**: ✅ **解決済み** - 全ての不正な参照を正しいファイル名に修正完了

### ❌ 8. 将来対応機能の整合性
- **問題**: 
  - 各画面で「将来対応」機能が散発的に記載
  - 優先度・実装タイミングが統一されていない
- **影響**: 開発計画の策定困難
- **解決策**: 将来対応機能の一覧化・優先度付け
- **ステータス**: ❌ 未解決

---

## 現在の状況

### ✅ 解決済み（復習画面設計により）
1. **復習画面仕様不一致** → `11-review.md`作成完了
2. **学習進捗データ更新仕様** → 詳細な更新仕様を定義
3. **単語-級の関連データ構造不足** → `grade`フィールド追加
4. **SRSシステムの仕様が曖昧** → 間隔制御アルゴリズム詳細化
5. **音声再生ポリシーの不統一** → 画面目的に応じた一貫性を確認

### ❌ 残存課題
1. **データ構造の重複・競合** → 統合データ設計ドキュメント必要
2. **将来対応機能の整合性** → 実装フェーズで整理予定

---

## チェック完了の条件
各項目について、以下の条件を満たした場合に ✅ 完了とする：

- **仕様の明確化**: 曖昧さがなく、実装可能なレベルまで詳細化
- **矛盾の解消**: 他の仕様書との整合性確保
- **実装可能性**: 技術的に実現可能であることを確認

---
*作成日: 2025/6/13*
*最終更新: 2025/6/13 (復習画面設計完了による大幅解決)*